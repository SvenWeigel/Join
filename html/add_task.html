<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <base href="../" />
  <link rel="shortcut icon" href="assets/img/login_center_logo.svg" type="image/x-icon" />
  <link rel="stylesheet" href="styles/global.css" />
  <link rel="stylesheet" href="styles/font.css" />
  <link rel="stylesheet" href="styles/menu_bar.css" />
  <link rel="stylesheet" href="styles/add_tasks.css" />
  <link rel="stylesheet" href="styles/form_validation.css" />
  <link rel="stylesheet" href="styles/header.css" />
  <link rel="stylesheet" href="styles/bottom_nav.css" />
  <link rel="stylesheet" href="styles/responsiv/responsiv_add_task.css" />
  <script src="scripts/script.js"></script>
  <script src="scripts/validation_helpers.js"></script>
  <script src="scripts/validation_task.js"></script>
  <script src="scripts/form_validation.js"></script>
  <script>
    if (typeof checkAuth === "function" && !checkAuth()) {
      document.write("");
    }
  </script>
  <title>Add Task</title>
</head>

<body>
  <div id="rotate-warning">Bitte drehe dein Ger√§t ins Hochformat</div>
  <div id="rotate-protection">
    <div class="main-layout-container">
      <header>
        <div class="header-content">
          <img class="logo-responsive" src="assets/img/logo.svg" />
          <span>Kanban Project Management Tool</span>
          <div class="header-profile-container">
            <a href="html/help.html"><img src="assets/icons/help.svg" alt="help_icon" /></a>
            <div class="user-badge" onclick="showProfileOptions()" title="Benutzer">
              <div class="user-avatar">SM</div>
            </div>
          </div>
          <div class="profile-options d-none" id="profile-options">
            <a class="help-options" href="html/help.html">Help</a>
            <a href="html/legal_notice.html">Legal Notice</a>
            <a href="html/privacy_policy.html">Privacy Policy</a>
            <a href="#" onclick="logout(); return false;">Log Out</a>
          </div>
        </div>
      </header>

      <aside class="menu-bar-container">
        <div class="join-logo-container">
          <img src="assets/img/join_logo_vector.svg" alt="join logo" />
        </div>

        <div class="menu-bar-btn-container">
          <div class="summary-btn center-btn">
            <a class="main-bar-btn" href="html/summary.html">
              <img src="assets/icons/summary.svg" alt="" />Summary
            </a>
          </div>
          <div class="add-task-btn center-btn">
            <a class="main-bar-btn" href="html/add_task.html">
              <img src="assets/icons/add_task.svg" alt="" />Add Task
            </a>
          </div>
          <div class="board-btn center-btn">
            <a class="main-bar-btn" href="html/board.html">
              <img src="assets/icons/board.svg" alt="" />Board
            </a>
          </div>
          <div class="contacts-btn center-btn">
            <a class="main-bar-btn" href="html/contacts.html">
              <img src="assets/icons/contacts.svg" alt="" />Contacts
            </a>
          </div>
        </div>

        <div class="legal-container">
          <div class="privacy-btn">
            <a href="html/privacy_policy.html">Privacy Policy</a>
          </div>
          <div class="legal-link">
            <a href="html/legal_notice.html">Legal Notice</a>
          </div>
        </div>
      </aside>

      <main class="add-task-container">
        <div class="title-positioning">
          <h1>Add Task</h1>
        </div>

        <form id="addTaskFormPage">
          <div class="content">
            <div class="left-content">
              <div class="title-section">
                <label for="taskTitlePage">Title<span class="required-star">*</span></label>
                <input id="taskTitlePage" name="title" class="titel-input" type="text" placeholder="Enter a title" />
                <span id="title-span-page" class="error-message">Title is required</span>
              </div>
              <div class="description-section">
                <label for="taskDescriptionPage">Description</label>
                <textarea id="taskDescriptionPage" name="description" placeholder="Enter a description"></textarea>
              </div>
              <div class="due-date-section">
                <label for="taskDueDatePage">Due date<span class="required-star">*</span></label>
                <input id="taskDueDatePage" name="due" class="due-date-input" type="date" placeholder="mm/dd/yyyy" />
                <span id="date-span-page" class="error-message">Due date is required</span>
              </div>
            </div>
            <div class="seperator-content"></div>
            <div class="right-content">
              <div class="priority-section">
                <span>Priority</span>
                <div class="priority-buttons-container">
                  <button type="button" class="priority-btn" data-priority="urgent">
                    Urgent
                    <img src="assets/icons/urgent_icon.svg" alt="Urgent" class="prio-icon" />
                  </button>
                  <button type="button" class="priority-btn active" data-priority="medium">
                    Medium
                    <img src="assets/icons/medium_icon_orange.svg" alt="Medium" class="prio-icon" />
                  </button>
                  <button type="button" class="priority-btn" data-priority="low">
                    Low
                    <img src="assets/icons/low_icon.svg" alt="Low" class="prio-icon" />
                  </button>
                </div>
              </div>
              <div class="assigned-section">
                <label>Assigned to</label>
                <div class="custom-dropdown" id="assigneeDropdown">
                  <div class="dropdown-header" onclick="toggleAssigneeDropdown()">
                    <input type="text" id="assigneeSearch" class="dropdown-search"
                      placeholder="Select contacts to assign" oninput="filterAssigneeList()"
                      onclick="openAssigneeDropdown()" />
                    <img src="assets/icons/arrow_drop_downaa.svg" alt="Dropdown" class="dropdown-arrow" />
                  </div>
                  <div class="dropdown-list" id="assigneeList"></div>
                </div>
                <div class="selected-contacts" id="selectedContactsBadges"></div>
              </div>

              <div class="category-section">
                <label>Category<span class="required-star">*</span></label>
                <div class="custom-dropdown" id="categoryDropdownPage">
                  <div class="dropdown-header" onclick="togglePageCategoryDropdown()">
                    <span id="pageCategorySelected" class="dropdown-selected-text">Select task category</span>
                    <img src="assets/icons/arrow_drop_downaa.svg" alt="Dropdown" class="dropdown-arrow"
                      id="categoryDropdownArrowPage" />
                  </div>
                  <div class="dropdown-list" id="pageCategoryList">
                    <div class="dropdown-item category-option" data-value="technical"
                      onclick="selectPageCategory('technical', 'Technical Task')">
                      <span>Technical Task</span>
                    </div>
                    <div class="dropdown-item category-option" data-value="userstory"
                      onclick="selectPageCategory('userstory', 'User Story')">
                      <span>User Story</span>
                    </div>
                  </div>
                </div>
                <input type="hidden" id="taskCategoryPage" name="category" />
                <span id="category-span-page" class="error-message">Category is required</span>
              </div>

              <div class="subtasks-section">
                <label>Subtasks</label>
                <div class="subtask-input-wrapper" id="subtaskInputWrapper">
                  <input id="taskSubtasksPage" name="subtasks" class="subtask-input" type="text"
                    placeholder="Add new subtask" onfocus="showSubtaskActions()" onblur="hideSubtaskActionsDelayed()"
                    onkeydown="handleSubtaskKeydown(event)" />
                  <div class="subtask-actions" id="subtaskActions">
                    <img src="assets/icons/cancel_subtask.svg" alt="Cancel" class="subtask-action-icon"
                      onclick="cancelSubtaskInput()" />
                    <div class="subtask-action-divider"></div>
                    <img src="assets/icons/check_subtask.svg" alt="Confirm" class="subtask-action-icon"
                      onclick="confirmSubtaskInput()" />
                  </div>
                </div>
                <ul class="subtask-list" id="subtaskList"></ul>
              </div>
            </div>
            <span class="required-note-form"><span class="required-star-form">*</span>This field is
              required</span>
          </div>

          <!-- Footer mit Required-Hinweis und Buttons -->
          <div class="form-footer-wrapper">
            <span class="required-note"><span class="required-star">*</span>This field is
              required</span>
            <div class="buttons-actions">
              <button type="button" id="clearTaskBtn" class="btn-clear">
                Clear
                <img src="assets/icons/iconoir_cancel.svg" alt="Cancel" class="btn-icon" />
              </button>
              <button type="submit" class="btn-create" id="createTaskBtn">
                Create Task
                <img src="assets/icons/check.svg" alt="Confirm" class="btn-icon" />
              </button>
            </div>
          </div>
        </form>

        <!-- Erfolgsmeldung -->
        <div id="taskSuccessMessage" class="success-message">
          <span>Task added to board</span>
          <img src="assets/icons/board.svg" alt="Board" />
        </div>
      </main>
    </div>
    <nav class="bottom-nav">
      <a href="html/summary.html" class="nav-div">
        <img class="bottom-nav-img" src="assets/icons/summary.svg" />
        <span class="bottom-nav-span">Summary</span>
      </a>
      <a href="html/add_task.html" class="nav-div current-nav">
        <img class="bottom-nav-img" src="assets/icons/add_task.svg" />
        <span class="bottom-nav-span">Add Task</span>
      </a>
      <a href="html/board.html" class="nav-div">
        <img class="bottom-nav-img" src="assets/icons/board.svg" />
        <span class="bottom-nav-span">Board</span>
      </a>
      <a href="html/contacts.html" class="nav-div">
        <img class="bottom-nav-img" src="assets/icons/contacts.svg" />
        <span class="bottom-nav-span">Contacts</span>
      </a>
    </nav>
  </div>
  <script src="scripts/db.js"></script>
  <script src="templates/template_add_task.js"></script>
  <script src="render/render_add_task.js"></script>
  <script src="scripts/add_task_assigned_to.js"></script>
  <script src="scripts/add_task_category.js"></script>
  <script src="scripts/add_task_subtask.js"></script>
  <script src="scripts/add_task.js"></script>
  <script src="scripts/header.js"></script>
  <script src="scripts/script.js"></script>
</body>

</html>